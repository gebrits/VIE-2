<!DOCTYPE html>  <html> <head>   <title>core.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="dbpedia.html">                 dbpedia.js               </a>                                           <a class="source" href="rdfa.html">                 rdfa.js               </a>                                           <a class="source" href="stanbol.html">                 stanbol.js               </a>                                           <a class="source" href="connector.html">                 connector.js               </a>                                           <a class="source" href="core.html">                 core.js               </a>                                           <a class="source" href="entity.html">                 entity.js               </a>                                           <a class="source" href="mapping.html">                 mapping.js               </a>                                           <a class="source" href="util.html">                 util.js               </a>                                           <a class="source" href="entity.html">                 entity.js               </a>                                           <a class="source" href="person.html">                 person.js               </a>                                           <a class="source" href="place.html">                 place.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               core.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="c">/**</span>
<span class="c"> * @fileOverview VIE^2</span>
<span class="c"> * @author &lt;a href=&quot;mailto:sebastian.germesin@dfki.de&quot;&gt;Sebastian Germesin&lt;/a&gt;</span>
<span class="c"> */</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>VIE^2 is the semantic enrichment layer on top of VIE. 
Through it you can query and find related content 
for your editables. VIE^2 can talk to services like 
Apache Stanbol and OpenCalais to find related 
information for your content.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="o">,</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>VIE^2 is implmented as a <a href="http://semantic-interaction.org/blog/2011/03/01/jquery-ui-widget-factory/">jQuery UI widget</a>. </p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">$</span><span class="p">.</span><span class="nx">widget</span><span class="p">(</span><span class="s1">&#39;VIE2.vie2&#39;</span><span class="o">,</span> <span class="p">{</span>
    	</pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>default options</p>             </td>             <td class="code">               <div class="highlight"><pre>    	<span class="nx">options</span><span class="o">:</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p><strong>namespaces</strong>: There are currently some default namespaces given, which
can be overwritten and/or extended using the .vie2('option', ...) method.</p>             </td>             <td class="code">               <div class="highlight"><pre>    		<span class="nx">namespaces</span><span class="o">:</span> <span class="p">{</span>
				<span class="s1">&#39;dbpedia&#39;</span> <span class="o">:</span> <span class="s1">&#39;http://dbpedia.org/resource/&#39;</span><span class="o">,</span>
				<span class="s1">&#39;dbprop&#39;</span> <span class="o">:</span> <span class="s1">&#39;http://dbpedia.org/property/&#39;</span><span class="o">,</span>
				<span class="s1">&#39;dbonto&#39;</span> <span class="o">:</span> <span class="s1">&#39;http://dbpedia.org/ontology/&#39;</span><span class="o">,</span>
				<span class="s1">&#39;rdf&#39;</span> <span class="o">:</span> <span class="s1">&#39;http://www.w3.org/1999/02/22-rdf-syntax-ns#&#39;</span><span class="o">,</span>
				<span class="s1">&#39;rdfs&#39;</span> <span class="o">:</span> <span class="s1">&#39;http://www.w3.org/2000/01/rdf-schema#&#39;</span><span class="o">,</span>
				<span class="s1">&#39;iks&#39;</span> <span class="o">:</span> <span class="s1">&#39;http://www.iks-project.eu/#&#39;</span><span class="o">,</span>
				<span class="s1">&#39;fise&#39;</span> <span class="o">:</span> <span class="s1">&#39;http://fise.iks-project.eu/ontology/&#39;</span><span class="o">,</span>
				<span class="s1">&#39;foaf&#39;</span> <span class="o">:</span> <span class="s1">&#39;http://xmlns.com/foaf/0.1/&#39;</span><span class="o">,</span>
				<span class="s1">&#39;dc&#39;</span> <span class="o">:</span> <span class="s1">&#39;http://purl.org/dc/terms/&#39;</span><span class="o">,</span>
				<span class="s1">&#39;geo&#39;</span> <span class="o">:</span> <span class="s1">&#39;http://www.w3.org/2003/01/geo/wgs84_pos#&#39;</span>
			<span class="p">}</span><span class="o">,</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p><strong>contextchanged</strong>: the contextchanged event (triggered after analysis)
you can bind to that event like this:
<code><pre>$(...).vie2().bind('vie2contextchanged', function () {});</pre></code></p>             </td>             <td class="code">               <div class="highlight"><pre>    		<span class="nx">contextchanged</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">noop</span>
    	<span class="p">}</span><span class="o">,</span>
    	
    	<span class="nx">_create</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    		<span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
    		<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">namespaces</span><span class="o">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">k</span><span class="o">,</span> <span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
    			<span class="nx">that</span><span class="p">.</span><span class="nx">_cache</span><span class="p">.</span><span class="nx">prefix</span><span class="p">(</span><span class="nx">k</span><span class="o">,</span> <span class="nx">v</span><span class="p">);</span>
			<span class="p">});</span>
    	<span class="p">}</span><span class="o">,</span>
    	</pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>extends needs to be used as the default implementation would overwrite the namespaces</p>             </td>             <td class="code">               <div class="highlight"><pre>    	<span class="nx">_setOption</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">key</span><span class="o">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    		<span class="k">if</span> <span class="p">(</span><span class="nx">key</span> <span class="o">===</span> <span class="s1">&#39;namespaces&#39;</span><span class="p">)</span> <span class="p">{</span>
    			<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span> <span class="p">(</span><span class="kc">true</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">namespaces</span><span class="o">,</span> <span class="nx">value</span><span class="p">);</span>
    			<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">namespaces</span><span class="o">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">k</span><span class="o">,</span> <span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
    				<span class="k">this</span><span class="p">.</span><span class="nx">_cache</span><span class="p">.</span><span class="nx">prefix</span><span class="p">(</span><span class="nx">k</span><span class="o">,</span> <span class="nx">v</span><span class="p">);</span>
				<span class="p">});</span>
    		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    			<span class="nx">jQuery</span><span class="p">.</span><span class="nx">Widget</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_setOption</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="o">,</span> <span class="p">[</span><span class="nx">key</span><span class="o">,</span> <span class="nx">value</span><span class="p">]);</span>
    		<span class="p">}</span>
    	<span class="p">}</span><span class="o">,</span>
    	</pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p><strong>_context</strong>: The private _context object stores for each connector
the returned result. The values are <pre>rdfQuery objects</pre>.</p>             </td>             <td class="code">               <div class="highlight"><pre>    	<span class="nx">_context</span><span class="o">:</span> <span class="p">{}</span><span class="o">,</span>
    	
    	<span class="nx">_cache</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">rdf</span><span class="p">()</span><span class="o">,</span>
		</pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p><strong>_matches</strong>: The private _matches array stores the matches of the last 'filter' call.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">_matches</span><span class="o">:</span> <span class="p">[]</span><span class="o">,</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p><strong>_oldMatches</strong>: The private _oldMatches array stores the matches of the 'filter' call before
the last one.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">_oldMatches</span><span class="o">:</span> <span class="p">[]</span><span class="o">,</span>
    	</pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p><strong>analyze</strong>: The <code><pre>analyze(callback)</pre></code> function is one of the three
main functions of this library. Analyze iterates over all registered connectors and
let them analyze and enrich with semantic entities. 
There are two ways of accessing the extracted knowledge:</p>             </td>             <td class="code">               <div class="highlight"><pre>		</pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <ol>
<li>Via the callback method, e.g., <code><pre>.vie2('analyze', function () {
var entities = $(this).vie2('filter', 'entity');
})</pre></code></li>
<li>By registering to the 'contextchanged' event, e.g., <code><pre>.bind('vie2contextchanged', function () {
var entities = $(this).vie2('filter', 'entity');
})</pre></code></li>
</ol>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">analyze</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="o">,</span> <span class="s2">&quot;VIE2.core&quot;</span><span class="o">,</span> <span class="s2">&quot;Start: analyze()!&quot;</span><span class="p">);</span>
			
			<span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
			<span class="kd">var</span> <span class="nx">connectorQueue</span> <span class="o">=</span> <span class="p">[];</span>
			<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">connectors</span><span class="o">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>fill queue of connectors with 'id's to have an overview of running connectors.
this supports the asynchronous calls.</p>             </td>             <td class="code">               <div class="highlight"><pre>				<span class="nx">connectorQueue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
			<span class="p">});</span>
			
			<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">connectors</span><span class="o">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">vie</span><span class="o">,</span> <span class="nx">conn</span><span class="p">)</span> <span class="p">{</span>
					<span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">rdf</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>we add all namespaces to the rdfQuery object. 
Attention: this might override namespaces that were added by the connector!</p>             </td>             <td class="code">               <div class="highlight"><pre>						<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">vie</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">namespaces</span><span class="o">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">k</span><span class="o">,</span> <span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
							<span class="nx">rdf</span><span class="p">.</span><span class="nx">prefix</span><span class="p">(</span><span class="nx">k</span><span class="o">,</span> <span class="nx">v</span><span class="p">);</span>
							<span class="nx">vie</span><span class="p">.</span><span class="nx">_cache</span><span class="p">.</span><span class="nx">prefix</span><span class="p">(</span><span class="nx">k</span><span class="o">,</span> <span class="nx">v</span><span class="p">);</span>
						<span class="p">});</span>
						</pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>add all triples to the local cache!</p>             </td>             <td class="code">               <div class="highlight"><pre>						<span class="nx">rdf</span><span class="p">.</span><span class="nx">databank</span><span class="p">.</span><span class="nx">triples</span><span class="p">().</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
							<span class="nx">vie</span><span class="p">.</span><span class="nx">_cache</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
						<span class="p">});</span>
						
						<span class="nx">vie</span><span class="p">.</span><span class="nx">_context</span><span class="p">[</span><span class="nx">conn</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nx">rdf</span><span class="o">;</span>
						<span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="o">,</span> <span class="s2">&quot;VIE2.core&quot;</span><span class="o">,</span> <span class="s2">&quot;Received RDF annotation from connector &#39;&quot;</span> <span class="o">+</span> <span class="nx">conn</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s2">&quot;&#39;!&quot;</span><span class="p">);</span>
						
						<span class="nx">removeElement</span><span class="p">(</span><span class="nx">connectorQueue</span><span class="o">,</span> <span class="nx">conn</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>everytime we receive annotations from each connector, we remove the connector's id from the
queue and check whether the queue is empty.</p>             </td>             <td class="code">               <div class="highlight"><pre>						<span class="k">if</span> <span class="p">(</span><span class="nx">connectorQueue</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>if the queue is empty, all connectors have successfully returned and we can call the
callback function, as well as we can trigger the contextchanged event.</p>             </td>             <td class="code">               <div class="highlight"><pre>							<span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="o">,</span> <span class="s2">&quot;VIE2.core&quot;</span><span class="o">,</span> <span class="s2">&quot;Finished task: &#39;analyze()&#39;!&quot;</span><span class="p">);</span>
							<span class="nx">that</span><span class="p">.</span><span class="nx">_trigger</span><span class="p">(</span><span class="s2">&quot;contextchanged&quot;</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="p">{});</span>
							<span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">that</span><span class="p">.</span><span class="nx">element</span><span class="p">);</span>
						<span class="p">}</span>
					<span class="p">};</span>
				<span class="p">}(</span><span class="nx">that</span><span class="o">,</span> <span class="k">this</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>start analysis with the connector.</p>             </td>             <td class="code">               <div class="highlight"><pre> 				<span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="o">,</span> <span class="s2">&quot;VIE2.core&quot;</span><span class="o">,</span> <span class="s2">&quot;Starting analysis with connector: &#39;&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s2">&quot;&#39;!&quot;</span><span class="p">);</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">analyze</span><span class="p">(</span><span class="nx">that</span><span class="p">.</span><span class="nx">element</span><span class="o">,</span> <span class="nx">c</span><span class="p">);</span>
			<span class="p">});</span>
		<span class="p">}</span><span class="o">,</span>
		</pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p><strong>filter</strong>: Offers an easy-to-use syntax to query for URIs of entities
with special types.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">filter</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">types</span><span class="p">)</span> <span class="p">{</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">types</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;warn&quot;</span><span class="o">,</span> <span class="s2">&quot;VIE2.core&quot;</span><span class="o">,</span> <span class="s2">&quot;Invoked &#39;filter()&#39; with undefined argument!&quot;</span><span class="p">);</span>
			<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">types</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">types</span><span class="p">))</span> <span class="p">{</span>
				<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">({</span><span class="s1">&#39;a&#39;</span> <span class="o">:</span> <span class="nx">types</span><span class="p">});</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
				<span class="nx">that</span><span class="p">.</span><span class="nx">_oldMatches</span> <span class="o">=</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_matches</span><span class="o">;</span>
				<span class="nx">that</span><span class="p">.</span><span class="nx">_matches</span> <span class="o">=</span> <span class="p">[];</span>
				
				<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">types</span><span class="o">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">k</span><span class="o">,</span> <span class="nx">v</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>convert to array if not already an array</p>             </td>             <td class="code">               <div class="highlight"><pre>					<span class="nx">v</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">v</span> <span class="o">===</span> <span class="s1">&#39;array&#39;</span><span class="p">)</span><span class="o">?</span> <span class="nx">v</span> <span class="o">:</span> <span class="p">[</span><span class="nx">v</span><span class="p">];</span>

					<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">v</span><span class="o">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
						<span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">v</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
												
						<span class="nx">that</span><span class="p">.</span><span class="nx">_cache</span>
						<span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="s1">&#39;?subject &#39;</span> <span class="o">+</span> <span class="nx">k</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">)</span>
						<span class="p">.</span><span class="nx">each</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
							<span class="nx">that</span><span class="p">.</span><span class="nx">_matches</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">subject</span><span class="p">);</span>
						<span class="p">});</span>
					<span class="p">});</span>
				<span class="p">});</span>
				
				<span class="k">return</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_matches</span><span class="o">;</span>				
			<span class="p">}</span>
		<span class="p">}</span><span class="o">,</span>
		</pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p><strong>query</strong>: The query function supports querying for properties. The uri needs
to be of type <code>jQuery.rdf</code> object and the property is either an array of strings
or a simple string. The function iterates over all connectors that have <code>query()</code>
implemented and collects data in an object.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">query</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">uri</span><span class="o">,</span> <span class="nx">props</span><span class="o">,</span> <span class="nx">options</span><span class="o">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>TODO: look up this._cache first!</p>             </td>             <td class="code">               <div class="highlight"><pre>			<span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">{};</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">uri</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">props</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;warn&quot;</span><span class="o">,</span> <span class="s2">&quot;VIE2.core&quot;</span><span class="o">,</span> <span class="s2">&quot;Invoked &#39;query()&#39; with undefined argument(s)!&quot;</span><span class="p">);</span>
				<span class="nx">callback</span><span class="p">(</span><span class="nx">ret</span><span class="p">);</span>
				<span class="k">return</span><span class="o">;</span>
			<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">props</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">uri</span><span class="o">,</span> <span class="p">[</span><span class="nx">props</span><span class="p">]</span><span class="o">,</span> <span class="nx">options</span><span class="o">,</span> <span class="nx">callback</span><span class="p">);</span>
				<span class="k">return</span><span class="o">;</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">((</span><span class="nx">uri</span> <span class="k">instanceof</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">rdf</span><span class="p">.</span><span class="nx">resource</span> <span class="o">&amp;&amp;</span>
					<span class="nx">uri</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;uri&#39;</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">uri</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">props</span><span class="p">))</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>initialize the returning object</p>             </td>             <td class="code">               <div class="highlight"><pre>				<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">props</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">ret</span><span class="p">[</span><span class="nx">props</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[];</span>
				<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>look up for properties in _cache
first check if we should ignore the cache!</p>             </td>             <td class="code">               <div class="highlight"><pre>				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">options</span> <span class="o">||</span> <span class="p">(</span><span class="nx">options</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">options</span><span class="p">.</span><span class="nx">noCache</span><span class="p">))</span> <span class="p">{</span>
					<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">props</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
						<span class="nx">that</span><span class="p">.</span><span class="nx">_cache</span>
						<span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">rdf</span><span class="p">.</span><span class="nx">pattern</span><span class="p">(</span><span class="nx">uri</span><span class="o">,</span> <span class="nx">props</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">,</span> <span class="s1">&#39;?object&#39;</span><span class="o">,</span> <span class="p">{</span> <span class="nx">namespaces</span><span class="o">:</span> <span class="nx">that</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">namespaces</span><span class="p">}))</span>
						<span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
							<span class="nx">ret</span><span class="p">[</span><span class="nx">props</span><span class="p">[</span><span class="nx">i</span><span class="p">]].</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">object</span><span class="p">);</span>
						<span class="p">});</span>
					<span class="p">}</span>
				<span class="p">}</span>
				</pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>finish here if said so!</p>             </td>             <td class="code">               <div class="highlight"><pre>				<span class="k">if</span> <span class="p">(</span><span class="nx">options</span> <span class="o">&amp;&amp;</span> <span class="nx">options</span><span class="p">.</span><span class="nx">cacheOnly</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">callback</span><span class="p">(</span><span class="nx">ret</span><span class="p">);</span>
					<span class="k">return</span><span class="o">;</span>
				<span class="p">}</span>
				
				<span class="kd">var</span> <span class="nx">connectorQueue</span> <span class="o">=</span> <span class="p">[];</span>
				<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">connectors</span><span class="o">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>fill queue of connectors with 'id's to have an overview of running connectors.
this supports the asynchronous calls.</p>             </td>             <td class="code">               <div class="highlight"><pre>					<span class="nx">connectorQueue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
				<span class="p">});</span>
				</pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>look up for properties in the connectors that
implement/overwrite the query() method</p>             </td>             <td class="code">               <div class="highlight"><pre>				<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">connectors</span><span class="o">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
					<span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="o">,</span> <span class="s2">&quot;VIE2.core&quot;</span><span class="o">,</span> <span class="s2">&quot;Start &#39;query()&#39; with connector &#39;&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s2">&quot;&#39;!&quot;</span><span class="p">);</span>
					<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">vie</span><span class="o">,</span> <span class="nx">conn</span><span class="p">)</span> <span class="p">{</span>
						<span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
							<span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="o">,</span> <span class="s2">&quot;VIE2.core&quot;</span><span class="o">,</span> <span class="s2">&quot;Received query information from connector &#39;&quot;</span> <span class="o">+</span> <span class="nx">conn</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s2">&quot;&#39;!&quot;</span><span class="p">);</span>
							<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="o">,</span> <span class="nx">ret</span><span class="o">,</span> <span class="nx">data</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>TODO: add to cache!</p>             </td>             <td class="code">               <div class="highlight"><pre>							
							<span class="nx">removeElement</span><span class="p">(</span><span class="nx">connectorQueue</span><span class="o">,</span> <span class="nx">conn</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
							<span class="k">if</span> <span class="p">(</span><span class="nx">connectorQueue</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>if the queue is empty, all connectors have successfully returned and we can call the
callback function, as well as we can trigger the contextchanged event.</p>             </td>             <td class="code">               <div class="highlight"><pre>								<span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="o">,</span> <span class="s2">&quot;VIE2.core&quot;</span><span class="o">,</span> <span class="s2">&quot;Finished task: &#39;query()&#39;!&quot;</span><span class="p">);</span>
								<span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">ret</span><span class="p">);</span>
							<span class="p">}</span>
						<span class="p">};</span>
					<span class="p">}(</span><span class="nx">that</span><span class="o">,</span> <span class="k">this</span><span class="p">);</span>
					<span class="k">this</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">uri</span><span class="o">,</span> <span class="nx">props</span><span class="o">,</span> <span class="nx">that</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">namespaces</span><span class="o">,</span> <span class="nx">c</span><span class="p">);</span>
				<span class="p">});</span>
			<span class="p">}</span>
		<span class="p">}</span><span class="o">,</span>
		
		<span class="nx">mapping</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">mappingId</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>if _matches isempty => over all
else => only over _matches!</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="p">}</span><span class="o">,</span>		
		</pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p><strong>matches</strong>: A convenience method to access the matches from the last <pre>filter()</pre call.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">matches</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
			<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_matches</span><span class="o">;</span>
		<span class="p">}</span><span class="o">,</span>
		</pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p><strong>context</strong>: A convenience method to access the private object <pre>_context</pre>.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">context</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">connId</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_context</span><span class="p">[</span><span class="nx">connId</span><span class="p">])</span> <span class="p">{</span>
				<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_context</span><span class="p">[</span><span class="nx">connId</span><span class="p">];</span>
			<span class="p">}</span>
		<span class="p">}</span><span class="o">,</span>
		</pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p><strong>undo</strong>: Reverts the last <pre>filter()</pre> call.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">undo</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_matches</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_oldMatches</span><span class="o">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_oldMatches</span> <span class="o">=</span> <span class="p">[];</span>
			<span class="k">return</span> <span class="k">this</span><span class="o">;</span>
		<span class="p">}</span><span class="o">,</span>
		</pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p><strong>clear</strong>: Clears the local context, the matches and oldMatches.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">clear</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_matches</span> <span class="o">=</span> <span class="p">[];</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_oldMatches</span> <span class="o">=</span> <span class="p">[];</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_context</span> <span class="o">=</span> <span class="p">{};</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_cache</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">rdf</span><span class="p">();</span>
			<span class="k">return</span> <span class="k">this</span><span class="o">;</span>
		<span class="p">}</span>
		
	<span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p><strong>$.VIE2.log</strong>: Static convenience method for logging.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">log</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">level</span><span class="o">,</span> <span class="nx">component</span><span class="o">,</span> <span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">switch</span> <span class="p">(</span><span class="nx">level</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">case</span> <span class="s2">&quot;info&quot;</span><span class="o">:</span>
		<span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="nx">component</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">message</span><span class="p">);</span>
		<span class="k">break</span><span class="o">;</span>
	<span class="nx">case</span> <span class="s2">&quot;warn&quot;</span><span class="o">:</span>
		<span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">component</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">message</span><span class="p">);</span>
		<span class="k">break</span><span class="o">;</span>
	<span class="nx">case</span> <span class="s2">&quot;error&quot;</span><span class="o">:</span>
		<span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">component</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">message</span><span class="p">);</span>
		<span class="k">break</span><span class="o">;</span>
	<span class="p">}</span>
<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <p><strong>$.VIE2.connectors</strong>: Static array of all registered connectors.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">connectors</span> <span class="o">=</span> <span class="p">[];</span></pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p><strong>$.VIE2.registerConnector</strong>: Static method to register a connector (is automatically called 
during construction of connector class.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">registerConnector</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">connector</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <p>first check if there is already 
a connector with 'connector.id' registered</p>             </td>             <td class="code">               <div class="highlight"><pre>	<span class="kd">var</span> <span class="nx">register</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
	<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">connectors</span><span class="o">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">connector</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">register</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
			<span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
		<span class="p">}</span>
	<span class="p">});</span>
	<span class="k">if</span> <span class="p">(</span><span class="nx">register</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">connectors</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">connector</span><span class="p">);</span>
		<span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="o">,</span> <span class="s2">&quot;VIE2.core&quot;</span><span class="o">,</span> <span class="s2">&quot;Registered connector &#39;&quot;</span> <span class="o">+</span> <span class="nx">connector</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;warn&quot;</span><span class="o">,</span> <span class="s2">&quot;VIE2.core&quot;</span><span class="o">,</span> <span class="s2">&quot;Did not register connector, as there is&quot;</span> <span class="o">+</span>
				<span class="s2">&quot;already a connector with the same id registered.&quot;</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <p><strong>$.VIE2.getConnector</strong>: Static method to get a connector.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">getConnector</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">connectorId</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <p>first check if there is already 
a connector with 'connector.id' registered</p>             </td>             <td class="code">               <div class="highlight"><pre>	<span class="kd">var</span> <span class="nx">connector</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
	<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">connectors</span><span class="o">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">connectorId</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">connector</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
			<span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
		<span class="p">}</span>
	<span class="p">});</span>
	<span class="k">return</span> <span class="nx">connector</span><span class="o">;</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <p><strong>$.VIE2.unregisterConnector</strong>: Unregistering of connectors. There is currently
no usecase for that, but it wasn't that hard to implement it ;)</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">unregisterConnector</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">connectorId</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">connector</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
	<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">connectors</span><span class="o">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">connectorId</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">connectors</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="o">,</span> <span class="mi">1</span><span class="p">);</span>
			<span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="o">,</span> <span class="s2">&quot;VIE2.core&quot;</span><span class="o">,</span> <span class="s2">&quot;De-registered connector &#39;&quot;</span> <span class="o">+</span> <span class="nx">connector</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">);</span>
			<span class="nx">connector</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
			<span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
		<span class="p">}</span>
	<span class="p">});</span>
	<span class="k">return</span> <span class="nx">connector</span><span class="o">;</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-42">&#182;</a>               </div>               <p><strong>$.VIE2.mappings</strong>: Static array of all registered mappings.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">mappings</span> <span class="o">=</span> <span class="p">[];</span></pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-43">&#182;</a>               </div>               <p><strong>$.VIE2.registerMapping</strong>: Static method to register a mapping (is automatically called 
during construction of mapping class.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">registerMapping</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">mapping</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-44">&#182;</a>               </div>               <p>first check if there is already 
a mapping with 'mapping.id' registered</p>             </td>             <td class="code">               <div class="highlight"><pre>	<span class="kd">var</span> <span class="nx">register</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
	<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">mappings</span><span class="o">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">mapping</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">register</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
			<span class="k">return</span><span class="o">;</span>
		<span class="p">}</span>
	<span class="p">});</span>
	<span class="k">if</span> <span class="p">(</span><span class="nx">register</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">mappings</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">mapping</span><span class="p">);</span>
		<span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="o">,</span> <span class="s2">&quot;VIE2.core&quot;</span><span class="o">,</span> <span class="s2">&quot;Registered mapping &#39;&quot;</span> <span class="o">+</span> <span class="nx">mapping</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;warn&quot;</span><span class="o">,</span> <span class="s2">&quot;VIE2.core&quot;</span><span class="o">,</span> <span class="s2">&quot;Did not register mapping, as there is&quot;</span> <span class="o">+</span>
				<span class="s2">&quot;already a mapping with the same id registered.&quot;</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-45">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-45">&#182;</a>               </div>               <p><strong>$.VIE2.getMapping</strong>: Static method to get a mapping.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">getMapping</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">mappingId</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-46">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-46">&#182;</a>               </div>               <p>first check if there is already 
a mapping with 'mapping.id' registered</p>             </td>             <td class="code">               <div class="highlight"><pre>	<span class="kd">var</span> <span class="nx">mapping</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
	<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">mappings</span><span class="o">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">mappingId</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">mapping</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
			<span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
		<span class="p">}</span>
	<span class="p">});</span>
	<span class="k">return</span> <span class="nx">mapping</span><span class="o">;</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-47">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-47">&#182;</a>               </div>               <p><strong>$.VIE2.unregisterMapping</strong>: Unregistering of mappings. There is currently
no usecase for that, but it wasn't that hard to implement it ;)</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">unregisterMapping</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">mappingId</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">mapping</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
	<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">mappings</span><span class="o">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">mappingId</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">mappings</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="o">,</span> <span class="mi">1</span><span class="p">);</span>
			<span class="nx">jQuery</span><span class="p">.</span><span class="nx">VIE2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="o">,</span> <span class="s2">&quot;VIE2.core&quot;</span><span class="o">,</span> <span class="s2">&quot;De-registered mapping &#39;&quot;</span> <span class="o">+</span> <span class="nx">mapping</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">);</span>
			<span class="nx">mapping</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
			<span class="k">return</span><span class="o">;</span>
		<span class="p">}</span>
	<span class="p">});</span>
	<span class="k">return</span> <span class="nx">mapping</span><span class="o">;</span>
<span class="p">};</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 